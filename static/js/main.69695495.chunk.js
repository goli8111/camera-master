(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{53:function(e,t,a){e.exports=a(67)},58:function(e,t,a){},59:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),i=(a(58),a(59),a(11));function s(e){return{type:"SET_SCENE",_change_scene:e}}var l=a(85),u=a(87),m=a(33),d=Object(l.a)((function(e){return{root:{width:"100%"},ContentsBody:{position:"absolute",width:"100%",left:"0px",top:"0px",bottom:"50px"},BottomBar1:{position:"absolute",width:"40%",Height:"50px",left:"5%",bottom:"0px"},BottomBar2:{position:"absolute",width:"40%",left:"55%",Height:"50px",bottom:"0px"}}})),p={set_scene:s},v=Object(i.b)((function(e){return{_current_scene:e.scene._current_scene}}),p)((function(e){e._current_scene;var t=e.set_scene;console.log("Index_scene component start");var a=d();return r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.ContentsBody},r.a.createElement(m.a,{url:"https://m.blog.naver.com/elanvital7/221026487974",position:"absolute",width:"100%",id:"myId",className:"myClassname",height:"100%",styles:{height:"25px"}})),r.a.createElement(u.a,{onClick:function(){t("CameraCapture"),console.log("onCameraCapture")},className:a.BottomBar1,variant:"contained",color:"secondary"},"\uc0ac\uc9c4 \ucc0d\uae30"),r.a.createElement(u.a,{onClick:function(){console.log("onCameraCaptureSubmit")},className:a.BottomBar2,variant:"contained",color:"secondary"},"\uc81c\ucd9c\ud558\uae30"))})),f=a(14),h=a.n(f),g=a(27),C=a(34),b=a(35),E=a(25),y=a(50),_=a(49);var w=a(88),x=a(36),k=a.n(x),T=a(38),O=a.n(T),S=a(37),j=a.n(S),D=a(44),A=a.n(D),N=a(45),B=a.n(N),z=a(41),I=a.n(z),F=a(39),M=a.n(F),V=a(40),R=a.n(V),L=a(42),P=a.n(L),U=a(43),W=a.n(U),G=!0,X={color:"red",position:"fixed",left:"0px",top:"50px",width:"100%",transform:"scale(1.5)",WebkitTransform:"scale(1.5)"},H={color:"red",position:"fixed",left:"0px",bottom:"50px",width:"100%",transform:"scale(1.5)",WebkitTransform:"scale(1.5)"},J={position:"fixed",left:"0px",width:"100%",top:"0%",height:"100%",zIndex:"-3",backgroundColor:"black"},$={position:"fixed",left:"0px",width:"100%",top:"50%",height:"auto",transform:"translate(0%, -50%)",zIndex:"-2"},q=function(e){Object(y.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(C.a)(this,a),(n=t.call(this,e,a.defaultProps)).getCanvas=function(e){n.canvas=e},n.getCanvasOverlay=function(e){n.canvasOverlay=e},n.getVideo=function(e){n.video=e},n.updateCameraGrid=function(e){var t=n.canvasOverlay;if(void 0!=t){var a=t.getContext("2d");if(void 0!=a&&(a.clearRect(0,0,t.width,t.height),1==e)){a.save(),a.strokeStyle="rgb(200,200,200)",a.lineWidth=3,a.globalAlpha=.1;for(var r=0;r<=t.width;r+=100)a.moveTo(r,0),a.lineTo(r,t.height);for(var o=0;o<=t.height;o+=100)a.moveTo(0,o),a.lineTo(t.width,o);a.stroke(),a.restore()}}},n.onNextCamera=function(){G=!G,console.log("user camera flag : "+G),n.playCamera()},n.onTimerSelect=function(){var e=n.state.cameraCaptureTimerType;++e>2&&(e=0),n.setState((function(){return{cameraCaptureTimerType:e}})),console.log("timer:"+e)},n.onCapture=function(){var e=n.canvas;if(void 0!=e){var t=0;switch(n.state.cameraCaptureTimerType){case 0:t=0;break;case 1:t=3e3;break;case 2:t=1e4}setTimeout((function(){var t=e.toDataURL("image/jpeg",1);this.props.onAddCanvasData(t),console.log("onCapture")}),t)}},n.onBack=function(){console.log("onBack")},n.onFlash=function(){var e=n.state.cameraFlashType;++e>1&&(e=0),n.setState((function(){return{cameraFlashType:e}})),console.log("flash:"+e)},n.onToggleGrid=function(){var e=!n.state.gridView;n.setState((function(){return{gridView:e}})),console.log("grid view:"+e),n.updateCameraGrid(e)},n.onMovieFilter=function(){var e=n.state.cameraFilterType;++e>7&&(e=0),n.setState((function(){return{cameraFilterType:e}})),console.log("camera filter:"+e)},n.stopCamera=n.stopCamera.bind(Object(E.a)(n)),n.state={cameraCaptureTimerType:0,cameraFlashType:0,cameraFilterType:0,gridView:!1},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.setupCamera();case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error("This browser does not support video capture, or this device does not have a camera");case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"setupCamera",value:function(){var e=Object(g.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){e.kind,console.log(e.kind+": "+e.label+", id = "+e.deviceId)}))})).catch((function(e){console.log(e.name+": "+e.message)})),this.playCamera();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"playCamera",value:function(){var e=Object(g.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.stream&&window.stream.getTracks().forEach((function(e){e.stop()})),t=this.video,1280,720,a="user",0==G&&(a="environment"),e.next=8,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:a,frameRate:60,width:{exact:1280},height:{exact:720},aspectRatio:{exact:1280/720}}});case 8:n=e.sent,window.stream=n,t.srcObject=n,t.play();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopCamera",value:function(){console.log("stopCamera call");var e=this.video;void 0!=e&&(e.pause(),e.src="",void 0!=e.srcObject&&(e.srcObject.getTracks()[0].stop(),e.srcObject=void 0),this.props.onPosenetPose(void 0),console.log("video off"))}},{key:"render",value:function(){var e,t;switch(this.state.cameraCaptureTimerType){case 0:e=r.a.createElement(k.a,{color:"primary",fontSize:"large"});break;case 1:e=r.a.createElement(j.a,{color:"primary",fontSize:"large"});break;case 2:e=r.a.createElement(O.a,{color:"primary",fontSize:"large"})}switch(this.state.cameraFlashType){case 0:t=r.a.createElement(M.a,{color:"primary",fontSize:"large"});break;case 1:t=r.a.createElement(R.a,{color:"primary",fontSize:"large"})}return r.a.createElement("div",{style:J},r.a.createElement("video",{id:"videoCamera",style:$,src:"",playsInline:!0,ref:this.getVideo}),r.a.createElement("canvas",{style:{position:"fixed",left:"0%",top:"0%",zIndex:"-1"},ref:this.getCanvas}),r.a.createElement("canvas",{id:"canvasOverlay",style:{position:"fixed",left:"0%",top:"0%",zIndex:"-1"},ref:this.getCanvasOverlay}),r.a.createElement("div",{style:X},r.a.createElement(w.a,{onClick:this.onBack.bind(this)},r.a.createElement(I.a,{color:"primary",fontSize:"large"})),r.a.createElement(w.a,{onClick:this.onFlash.bind(this)},t),r.a.createElement(w.a,{onClick:this.onToggleGrid.bind(this)},r.a.createElement(P.a,{color:"primary",fontSize:"large"})),r.a.createElement(w.a,{onClick:this.onMovieFilter.bind(this)},r.a.createElement(W.a,{color:"primary",fontSize:"large"}))),r.a.createElement("div",{style:H},r.a.createElement(w.a,{onClick:this.onTimerSelect.bind(this)},e),r.a.createElement(w.a,{onClick:this.onCapture.bind(this)},r.a.createElement(A.a,{color:"primary",fontSize:"large"})),r.a.createElement(w.a,{onClick:this.onNextCamera.bind(this)},r.a.createElement(B.a,{color:"primary",fontSize:"large"}))))}}]),a}(n.Component);q.defaultProps={showVideo:!1,showDebugVideo:!0,loadingText:"Loading...please be patient..."};var K=q=Object(i.b)((function(e){return{_current_scene:e.scene._current_scene,_closeCamera:e.camera._closeCamera}}),(function(e){return{onCloseCamera:function(t){return e({type:"CLOSECAMERA",_closeCamera:t})},onAddCanvasData:function(t){return e({type:"ADDCANVASDATA",_addCanvasData:t})}}}))(q),Q=a(48),Y=a(89),Z=a(90),ee=a(47),te=a.n(ee),ae=a(46),ne=a.n(ae),re=Object(l.a)({root:{width:"100%",bottom:0,position:"fixed",flexGrow:1}}),oe={set_scene:s},ce=Object(i.b)((function(e){return{_current_scene:e.scene._current_scene}}),oe)((function(e){e._current_scene;var t=e.set_scene,a=re(),n=r.a.useState(0),o=Object(Q.a)(n,2),c=o[0],i=o[1];return r.a.createElement(Y.a,{value:c,onChange:function(e,a){t(a),i(a)},showLabels:!0,className:a.root},r.a.createElement(Z.a,{value:"PortraitMaster",label:"Home",icon:r.a.createElement(ne.a,null)}),r.a.createElement(Z.a,{value:"CameraCapture",label:"\uc0ac\uc9c4\ucc0d\uae30",icon:r.a.createElement(te.a,null)}))})),ie=Object(l.a)((function(e){return{root:{width:"100%",height:"100%"}}})),se={set_scene:s},le=Object(i.b)((function(e){return{_current_scene:e.scene._current_scene}}),se)((function(e){var t=e._current_scene;e.set_scene;console.log("Index_scene component start");var a=ie();return r.a.createElement("div",{className:a.root},function(){switch(t){case"CameraCapture":return r.a.createElement(K,null);case"PortraitMaster":return r.a.createElement(v,null);default:return r.a.createElement(ce,null)}}())}));var ue=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(le,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=a(15),de={_current_scene:"IndexScene"};var pe={_closeCamera:""};var ve=Object(me.b)({scene:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(console.log("reducer scene action call:"+t.type),t.type){case"SET_SCENE":return console.log("SET_SCENE:"+t._change_scene),Object.assign({},e,{_current_scene:t._change_scene});default:return e}},camera:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(console.log("reducer scene action call:"+t.type),t.type){case"CLOSECAMERA":return console.log("CLOSECAMERA:"+t._closeCamera),Object.assign({},e,{_closeCamera:t._closeCamera});case"ADDCANVASDATA":default:return e}}}),fe=document.getElementById("root"),he=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),ge=Object(me.c)(ve,he);c.a.render(r.a.createElement(i.a,{store:ge},r.a.createElement(ue,null)),fe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.69695495.chunk.js.map