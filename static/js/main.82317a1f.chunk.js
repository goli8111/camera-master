(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{53:function(e,t,a){e.exports=a(67)},58:function(e,t,a){},59:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(14),i=a.n(o),c=(a(58),a(59),a(11));function s(e){return{type:"SET_SCENE",_change_scene:e}}var l=a(85),u=a(87),d=a(33),m=Object(l.a)((function(e){return{root:{width:"100%"},ContentsBody:{position:"absolute",width:"100%",left:"0px",top:"0px",bottom:"50px"},BottomBar1:{position:"absolute",width:"40%",Height:"50px",left:"5%",bottom:"0px"},BottomBar2:{position:"absolute",width:"40%",left:"55%",Height:"50px",bottom:"0px"}}})),p={set_scene:s},h=Object(c.b)((function(e){return{_current_scene:e.scene._current_scene}}),p)((function(e){e._current_scene;var t=e.set_scene;console.log("Index_scene component start");var a=m();return n.a.createElement("div",{className:a.root},n.a.createElement("div",{className:a.ContentsBody},n.a.createElement(d.a,{url:"https://m.blog.naver.com/elanvital7/221026487974",position:"absolute",width:"100%",id:"myId",className:"myClassname",height:"100%",styles:{height:"25px"}})),n.a.createElement(u.a,{onClick:function(){t("CameraCapture"),console.log("onCameraCapture")},className:a.BottomBar1,variant:"contained",color:"secondary"},"\uc0ac\uc9c4 \ucc0d\uae30"),n.a.createElement(u.a,{onClick:function(){console.log("onCameraCaptureSubmit")},className:a.BottomBar2,variant:"contained",color:"secondary"},"\uc81c\ucd9c\ud558\uae30"))})),v=a(13),f=a.n(v),g=a(22),b=a(34),C=a(35),y=a(26),w=a(50),E=a(49);var _=a(88),k=a(36),x=a.n(k),T=a(38),O=a.n(T),S=a(37),j=a.n(S),D=a(44),A=a.n(D),N=a(45),B=a.n(N),F=a(41),I=a.n(F),z=a(39),V=a.n(z),W=a(40),M=a.n(W),R=a(42),H=a.n(R),L=a(43),P=a.n(L),U=!0,G={color:"red",position:"fixed",left:"0px",top:"50px",width:"100%",transform:"scale(1.5)",WebkitTransform:"scale(1.5)"},X={color:"red",position:"fixed",left:"0px",bottom:"50px",width:"100%",transform:"scale(1.5)",WebkitTransform:"scale(1.5)"},q={position:"fixed",left:"0px",width:"100%",top:"0%",height:"100%",zIndex:"-3",backgroundColor:"black"},J={position:"fixed",left:"0px",width:"100%",top:"50%",height:"auto",transform:"translate(0%, -50%)",zIndex:"-2"},$={position:"fixed",left:"0px",width:"100%",top:"50%",height:"auto",transform:"translate(0%, -50%)",zIndex:"-1"},K=function(e){Object(w.a)(a,e);var t=Object(E.a)(a);function a(e){var r;return Object(b.a)(this,a),(r=t.call(this,e,a.defaultProps)).getCanvas=function(e){r.canvas=e},r.getCanvasOverlay=function(e){r.canvasOverlay=e},r.getVideo=function(e){r.video=e},r.updateCameraGrid=function(e){var t=r.video;if(void 0!=t){var a=r.canvasOverlay;if(void 0!=a){var n=a.getContext("2d");if(void 0!=n&&(t.videoWidth==a.width&&t.videoHeight==a.height||(a.width=t.videoWidth,a.height=t.videoHeight,n.width=t.videoWidth,n.height=t.videoHeight),n.clearRect(0,0,a.width,a.height),1==e)){n.save(),n.strokeStyle="rgb(255,0,0)",n.lineWidth=3,n.globalAlpha=.1;for(var o=0;o<=a.width;o+=a.width/3)n.moveTo(o,0),n.lineTo(o,a.height);for(var i=0;i<=a.height;i+=a.height/3)n.moveTo(0,i),n.lineTo(a.width,i);n.stroke(),n.restore()}}}},r.onNextCamera=function(){U=!U,console.log("user camera flag : "+U),r.playCamera()},r.onTimerSelect=function(){var e=r.state.cameraCaptureTimerType;++e>2&&(e=0),r.setState((function(){return{cameraCaptureTimerType:e}})),console.log("timer:"+e)},r.onCapture=function(){var e=r.canvas;if(void 0!=e){var t=0;switch(r.state.cameraCaptureTimerType){case 0:t=0;break;case 1:t=3e3;break;case 2:t=1e4}setTimeout((function(){var t=e.toDataURL("image/jpeg",1);this.props.onAddCanvasData(t),console.log("onCapture")}),t)}},r.onBack=function(){console.log("onBack")},r.onFlash=function(){var e=r.state.cameraFlashType;++e>1&&(e=0),r.setState((function(){return{cameraFlashType:e}})),console.log("flash:"+e)},r.onToggleGrid=function(){var e=!r.state.gridView;r.setState((function(){return{gridView:e}})),console.log("grid view:"+e),r.updateCameraGrid(e)},r.onMovieFilter=function(){var e=r.state.cameraFilterType;++e>7&&(e=0),r.setState((function(){return{cameraFilterType:e}})),console.log("camera filter:"+e)},r.stopCamera=r.stopCamera.bind(Object(y.a)(r)),r.state={cameraCaptureTimerType:0,cameraFlashType:0,cameraFilterType:0,gridView:!1},r}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.setupCamera();case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error("This browser does not support video capture, or this device does not have a camera");case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"setupCamera",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){e.kind,console.log(e.kind+": "+e.label+", id = "+e.deviceId)}))})).catch((function(e){console.log(e.name+": "+e.message)})),this.playCamera(),this.updateCamera();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"playCamera",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.stream&&window.stream.getTracks().forEach((function(e){e.stop()})),t=this.video,1280,720,a="user",0==U&&(a="environment"),e.next=8,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:a,frameRate:60,width:{exact:1280},height:{exact:720},aspectRatio:{exact:1280/720}}});case 8:r=e.sent,window.stream=r,t.srcObject=r,t.play();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopCamera",value:function(){console.log("stopCamera call");var e=this.video;void 0!=e&&(e.pause(),e.src="",void 0!=e.srcObject&&(e.srcObject.getTracks()[0].stop(),e.srcObject=void 0),this.props.onPosenetPose(void 0),console.log("video off"))}},{key:"updateCamera",value:function(){var e=this.canvas;if(void 0!=e){var t=e.getContext("2d");if(void 0!=t){var a=this.video;void 0!=a&&(0==this.props.showVideo?a.style.display="none":a.style.display="block",this.updateCameraFrame(t))}}}},{key:"updateCameraFrame",value:function(e){var t=this,a=this.video,r=function(){var n=Object(g.a)(f.a.mark((function n(){var o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.canvas,1!=t.props.showDebugVideo||void 0==o){n.next=26;break}a.videoWidth==o.width&&a.videoHeight==o.height||(o.width=a.videoWidth,o.height=a.videoHeight,e.width=a.videoWidth,e.height=a.videoHeight),e.clearRect(0,0,o.width,o.height),e.save(),n.t0=t.state.cameraFilterType,n.next=0===n.t0?8:1===n.t0?10:2===n.t0?12:3===n.t0?14:4===n.t0?16:5===n.t0?18:6===n.t0?20:7===n.t0?22:24;break;case 8:return e.filter="none",n.abrupt("break",24);case 10:return e.filter="grayscale(100%)",n.abrupt("break",24);case 12:return e.filter="brightness(100%)",n.abrupt("break",24);case 14:return e.filter="contrast(100%)",n.abrupt("break",24);case 16:return e.filter="sepia(100%)",n.abrupt("break",24);case 18:return e.filter="invert(100%)",n.abrupt("break",24);case 20:return e.filter="saturate(100%)",n.abrupt("break",24);case 22:return e.filter="blur(4px)",n.abrupt("break",24);case 24:e.drawImage(a,0,0),e.restore();case 26:if("start"!=t.props._closeCamera){n.next=30;break}return t.stopCamera(),t.props.onCloseCamera("complete"),n.abrupt("return");case 30:requestAnimationFrame(r);case 31:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();r()}},{key:"render",value:function(){var e,t;switch(this.state.cameraCaptureTimerType){case 0:e=n.a.createElement(x.a,{color:"primary",fontSize:"large"});break;case 1:e=n.a.createElement(j.a,{color:"primary",fontSize:"large"});break;case 2:e=n.a.createElement(O.a,{color:"primary",fontSize:"large"})}switch(this.state.cameraFlashType){case 0:t=n.a.createElement(V.a,{color:"primary",fontSize:"large"});break;case 1:t=n.a.createElement(M.a,{color:"primary",fontSize:"large"})}return n.a.createElement("div",{style:q},n.a.createElement("meta",{"http-equiv":"Content-Security-Policy",content:"default-src * gap:; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src *; img-src * data: blob: android-webview-video-poster:; style-src * 'unsafe-inline';"}),n.a.createElement("video",{id:"videoCamera",style:J,src:"",playsInline:!0,ref:this.getVideo}),n.a.createElement("canvas",{style:$,ref:this.getCanvas}),n.a.createElement("canvas",{id:"canvasOverlay",style:$,ref:this.getCanvasOverlay}),n.a.createElement("div",{style:G},n.a.createElement(_.a,{onClick:this.onBack.bind(this)},n.a.createElement(I.a,{color:"primary",fontSize:"large"})),n.a.createElement(_.a,{onClick:this.onFlash.bind(this)},t),n.a.createElement(_.a,{onClick:this.onToggleGrid.bind(this)},n.a.createElement(H.a,{color:"primary",fontSize:"large"})),n.a.createElement(_.a,{onClick:this.onMovieFilter.bind(this)},n.a.createElement(P.a,{color:"primary",fontSize:"large"}))),n.a.createElement("div",{style:X},n.a.createElement(_.a,{onClick:this.onTimerSelect.bind(this)},e),n.a.createElement(_.a,{onClick:this.onCapture.bind(this)},n.a.createElement(A.a,{color:"primary",fontSize:"large"})),n.a.createElement(_.a,{onClick:this.onNextCamera.bind(this)},n.a.createElement(B.a,{color:"primary",fontSize:"large"}))))}}]),a}(r.Component);K.defaultProps={showVideo:!1,showDebugVideo:!0,loadingText:"Loading...please be patient..."};var Q=K=Object(c.b)((function(e){return{_current_scene:e.scene._current_scene,_closeCamera:e.camera._closeCamera}}),(function(e){return{onCloseCamera:function(t){return e({type:"CLOSECAMERA",_closeCamera:t})},onAddCanvasData:function(t){return e({type:"ADDCANVASDATA",_addCanvasData:t})}}}))(K),Y=a(48),Z=a(89),ee=a(90),te=a(47),ae=a.n(te),re=a(46),ne=a.n(re),oe=Object(l.a)({root:{width:"100%",bottom:0,position:"fixed",flexGrow:1}}),ie={set_scene:s},ce=Object(c.b)((function(e){return{_current_scene:e.scene._current_scene}}),ie)((function(e){e._current_scene;var t=e.set_scene,a=oe(),r=n.a.useState(0),o=Object(Y.a)(r,2),i=o[0],c=o[1];return n.a.createElement(Z.a,{value:i,onChange:function(e,a){t(a),c(a)},showLabels:!0,className:a.root},n.a.createElement(ee.a,{value:"PortraitMaster",label:"Home",icon:n.a.createElement(ne.a,null)}),n.a.createElement(ee.a,{value:"CameraCapture",label:"\uc0ac\uc9c4\ucc0d\uae30",icon:n.a.createElement(ae.a,null)}))})),se=Object(l.a)((function(e){return{root:{width:"100%",height:"100%"}}})),le={set_scene:s},ue=Object(c.b)((function(e){return{_current_scene:e.scene._current_scene}}),le)((function(e){var t=e._current_scene;e.set_scene;console.log("Index_scene component start");var a=se();return n.a.createElement("div",{className:a.root},function(){switch(t){case"CameraCapture":return n.a.createElement(Q,null);case"PortraitMaster":return n.a.createElement(h,null);default:return n.a.createElement(ce,null)}}())}));var de=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(ue,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=a(15),pe={_current_scene:"IndexScene"};var he={_closeCamera:""};var ve=Object(me.b)({scene:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(console.log("reducer scene action call:"+t.type),t.type){case"SET_SCENE":return console.log("SET_SCENE:"+t._change_scene),Object.assign({},e,{_current_scene:t._change_scene});default:return e}},camera:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(console.log("reducer scene action call:"+t.type),t.type){case"CLOSECAMERA":return console.log("CLOSECAMERA:"+t._closeCamera),Object.assign({},e,{_closeCamera:t._closeCamera});case"ADDCANVASDATA":default:return e}}}),fe=document.getElementById("root"),ge=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),be=Object(me.c)(ve,ge);i.a.render(n.a.createElement(c.a,{store:be},n.a.createElement(de,null)),fe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.82317a1f.chunk.js.map